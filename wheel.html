<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>卡通点包器</title>

    <style>
        body {
            margin: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 90vh;
            font-family: "Comic Sans MS", "Arial Rounded MT Bold", Arial, sans-serif;

            /* 深色卡通背景：深紫 + 粉色柔光 */
            background: radial-gradient(circle at 50% 30%, #55305d, #2b1e36 70%);
        }

        #title {
            position: absolute;
            top: 3vh;
            font-size: 6vh;
            color: #ff88c9;
            text-shadow: 0 0 2vh rgba(255,150,200,0.8);
            font-weight: bold;
        }

        #box {
            width: 40vh;
            height: 40vh;

            /* 深色背景下更亮的卡通内盒 */
            background: #ffe6f4;

            border-radius: 8vh;
            display: flex;
            justify-content: center;
            align-items: center;

            font-size: 34vh;
            font-weight: bold;
            color: #ff4fa5;

            box-shadow:
                    inset 0 0 4vh rgba(255,130,180,0.4),
                    0 1vh 4vh rgba(0,0,0,0.6),
                    0 0 4vh rgba(255,160,210,0.4);

            position: relative;
            transform: translateY(0);
            transition: transform 0.25s cubic-bezier(.25,1.5,.35,1);
        }

        #start {
            position: absolute;
            bottom: 5vh;
            padding: 2vh 6vh;
            border: none;

            background: #ff66b7;
            color: white;

            border-radius: 4vh;

            font-size: 4.5vh;
            font-weight: bold;
            cursor: pointer;

            box-shadow:
                    0 0.8vh 2vh rgba(255,100,160,0.5),
                    inset 0 0 2vh rgba(255,255,255,0.4);

            transition: transform 0.15s ease;
        }

        #start:active {
            transform: scale(0.95);
        }
    </style>
</head>

<body>

<div id="title">卡通点包器</div>
<div id="box">0</div>
<button id="start">开始</button>

<script>
    const box = document.getElementById("box");

    let numbers = [2, 3, 4, 5]; // 数字数组
    let probabilities = [0.5, 0.25, 0.125, 0.075]; // 对应出现概率
    let index = 0;
    let running = false;

    let speed = 200;  // 初始跳动速度
    let minSpeed = 100;
    let maxSpeed = 600;

    // 根据权重随机选择目标数字
    function weightedRandom() {
        let r = Math.random();
        let sum = 0;
        for (let i = 0; i < numbers.length; i++) {
            sum += probabilities[i];
            if (r <= sum) return numbers[i];
        }
        return numbers[numbers.length - 1]; // 兜底
    }

    let target = 3; // 初始目标数字

    function jump() {
        if (!running) return;

        // 跳动动画
        box.style.transform = "translateY(-10vh)";
        setTimeout(() => {
            box.style.transform = "translateY(0)";
        }, speed * 0.4);

        // 切换数字
        index = (index + 1) % numbers.length;
        box.textContent = numbers[index];

        // 加速 / 减速逻辑
        if (speed < 240) speed += 24;      // 加速阶段
        else if (speed < maxSpeed) speed += 48; // 减速阶段

        // 判断停止条件
        if (speed >= maxSpeed && numbers[index] === target) {
            running = false;
            return;
        }

        setTimeout(jump, speed);
    }

    document.getElementById("start").onclick = () => {
        if (running) return;

        index = 0;
        speed = minSpeed;
        running = true;

        // 每次点击开始时，根据概率选择最终停的数字
        target = weightedRandom();
        jump();
    };
</script>


</body>
</html>
